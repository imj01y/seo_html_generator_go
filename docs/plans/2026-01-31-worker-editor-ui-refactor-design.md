# Worker ä»£ç ç¼–è¾‘å™¨ UI é‡æ„è®¾è®¡

> **è®¾è®¡æ—¥æœŸ:** 2026-01-31
> **ç›®æ ‡:** å°† Worker ä»£ç ç®¡ç†é¡µé¢é‡æ„ä¸º VS Code é£æ ¼çš„ç¼–è¾‘å™¨ç•Œé¢

## 1. æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡µé¢å¤´éƒ¨ï¼šWorker ä»£ç ç®¡ç†              [é‡å¯ Worker] [é‡å»º] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚  æ ‡ç­¾æ ï¼š[main.py Ã—] [config.py Ã—] [+ æ–°å»º]       â”‚
â”‚  ä¾§è¾¹æ   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  200px  â”‚                                                    â”‚
â”‚  å¯æ‹–æ‹½  â”‚  Monaco ç¼–è¾‘å™¨åŒºåŸŸ                                 â”‚
â”‚  è°ƒæ•´å®½åº¦â”‚  (å æ®ä¸»è¦ç©ºé—´)                                    â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚         â”‚  æ—¥å¿—é¢æ¿ï¼ˆå¯æŠ˜å ï¼Œé»˜è®¤æ”¶èµ·ï¼‰                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¸ƒå±€è¦ç‚¹ï¼š**
- ä¾§è¾¹æ ï¼šå›ºå®šå·¦ä¾§ï¼Œå®½åº¦ 200pxï¼Œå¯æ‹–æ‹½è°ƒæ•´ï¼ˆ150-400pxï¼‰
- ä¸»åŒºåŸŸï¼šæ ‡ç­¾æ  + ç¼–è¾‘å™¨ + æ—¥å¿—é¢æ¿ä¸‰å±‚
- æ—¥å¿—é¢æ¿ï¼šé»˜è®¤æŠ˜å ï¼Œé«˜åº¦å¯æ‹–æ‹½è°ƒæ•´
- å“åº”å¼ï¼šçª—å£è¾ƒçª„æ—¶ä¾§è¾¹æ å¯å®Œå…¨æŠ˜å 

---

## 2. ä¾§è¾¹æ ï¼ˆç›®å½•æ ‘ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WORKER              â”‚
â”‚ [åˆ·æ–°] [+æ–‡ä»¶] [+ç›®å½•]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ core             â”‚
â”‚   ğŸ“ workers        â”‚
â”‚     ğŸ“„ command_lis..â”‚
â”‚     ğŸ“„ spider_work..â”‚
â”‚   ğŸ“„ __init__.py    â”‚
â”‚ ğŸ“ database         â”‚
â”‚ ğŸ“ logs             â”‚
â”‚ ğŸ“„ config.py        â”‚
â”‚ ğŸ“„ main.py          â”‚  â† å½“å‰ç¼–è¾‘ä¸­ï¼Œé«˜äº®
â”‚ ğŸ“„ requirements.txt â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1 äº¤äº’è®¾è®¡

| æ“ä½œ | è¡Œä¸º |
|------|------|
| å•å‡»æ–‡ä»¶ | æ‰“å¼€æ–‡ä»¶ï¼ˆæ–°æ ‡ç­¾æˆ–å¤ç”¨å·²æœ‰æ ‡ç­¾ï¼‰ |
| å•å‡»ç›®å½• | å±•å¼€/æŠ˜å ç›®å½• |
| åŒå‡»æ–‡ä»¶ | å›ºå®šæ ‡ç­¾ï¼ˆéä¸´æ—¶é¢„è§ˆï¼‰ |
| å³é”® | å¼¹å‡ºä¸Šä¸‹æ–‡èœå• |
| æ‹–æ‹½æ–‡ä»¶ | ç§»åŠ¨åˆ°ç›®æ ‡ç›®å½• |

### 2.2 å³é”®èœå•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–°å»ºæ–‡ä»¶     â”‚
â”‚ æ–°å»ºç›®å½•     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é‡å‘½å    F2 â”‚
â”‚ ç§»åŠ¨åˆ°...    â”‚
â”‚ å¤åˆ¶è·¯å¾„     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸‹è½½         â”‚  â† ä»…æ–‡ä»¶
â”‚ åœ¨ç¼–è¾‘å™¨æ‰“å¼€ â”‚  â† ä»…æ–‡ä»¶
â”‚ è¿è¡Œ         â”‚  â† ä»… .py æ–‡ä»¶
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ é™¤      Delâ”‚  â† çº¢è‰²
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 è§†è§‰æ ·å¼

- å½“å‰æ‰“å¼€çš„æ–‡ä»¶ï¼šèƒŒæ™¯é«˜äº® + å·¦ä¾§è“è‰²ç«–çº¿
- å·²ä¿®æ”¹æœªä¿å­˜ï¼šæ–‡ä»¶ååæ˜¾ç¤ºç™½ç‚¹ `â—`
- ç›®å½•å›¾æ ‡ï¼šæ©™é»„è‰²æ–‡ä»¶å¤¹
- æ–‡ä»¶å›¾æ ‡ï¼šæ ¹æ®æ‰©å±•åæ˜¾ç¤ºä¸åŒå›¾æ ‡

---

## 3. æ ‡ç­¾æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“„ main.py â—Ã—] [ğŸ“„ config.py Ã—] [ğŸ“„ worker.py Ã—]    [+]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.1 æ ‡ç­¾å…ƒç´ 

| å…ƒç´  | è¯´æ˜ |
|------|------|
| æ–‡ä»¶å›¾æ ‡ | æ ¹æ®æ–‡ä»¶ç±»å‹æ˜¾ç¤ºå¯¹åº”å›¾æ ‡ |
| æ–‡ä»¶å | hover æ˜¾ç¤ºå®Œæ•´è·¯å¾„ |
| `â—` æ ‡è®° | æ–‡ä»¶å·²ä¿®æ”¹æœªä¿å­˜ |
| `Ã—` æŒ‰é’® | å…³é—­æ ‡ç­¾ï¼ˆæœ‰ä¿®æ”¹æ—¶æç¤ºä¿å­˜ï¼‰ |
| `[+]` æŒ‰é’® | æ–°å»ºç©ºç™½æ–‡ä»¶ |

### 3.2 æ ‡ç­¾äº¤äº’

- ç‚¹å‡»æ ‡ç­¾ï¼šåˆ‡æ¢åˆ°è¯¥æ–‡ä»¶
- ä¸­é”®ç‚¹å‡»ï¼šå…³é—­æ ‡ç­¾
- æ‹–æ‹½æ ‡ç­¾ï¼šè°ƒæ•´é¡ºåº
- å³é”®æ ‡ç­¾ï¼šèœå•ï¼ˆå…³é—­ã€å…³é—­å…¶ä»–ã€å…³é—­å³ä¾§ã€å¤åˆ¶è·¯å¾„ï¼‰
- æ ‡ç­¾è¿‡å¤šï¼šå·¦å³æ»šåŠ¨ + ä¸‹æ‹‰åˆ—è¡¨

---

## 4. ç¼–è¾‘å™¨åŒºåŸŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  core/workers/command_listener.py     [â–¶ è¿è¡Œ] [ğŸ’¾ ä¿å­˜]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1 â”‚ import asyncio                                        â”‚
â”‚  2 â”‚ from core.workers import SpiderWorker                 â”‚
â”‚  3 â”‚                                                       â”‚
â”‚    â”‚              Monaco Editor                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.1 ç¼–è¾‘å™¨å·¥å…·æ 

- å·¦ä¾§ï¼šæ–‡ä»¶å®Œæ•´ç›¸å¯¹è·¯å¾„
- å³ä¾§ï¼š
  - `è¿è¡Œ`ï¼šä»… .py æ–‡ä»¶æ˜¾ç¤º
  - `ä¿å­˜`ï¼šCtrl+S å¿«æ·é”®

### 4.2 ç¼–è¾‘å™¨é…ç½®

- ä¸»é¢˜ï¼šVS Dark
- æ˜¾ç¤ºï¼šè¡Œå·ã€å°åœ°å›¾ã€è‡ªåŠ¨æ¢è¡Œ
- å¿«æ·é”®ï¼šCtrl+S ä¿å­˜ï¼ŒCtrl+F æœç´¢

---

## 5. æ—¥å¿—é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¼ è¿è¡Œæ—¥å¿—                              [æ¸…ç©º] [ğŸ“‹ å¤åˆ¶]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ > python main.py                                   14:32:05 â”‚
â”‚ INFO: Worker started                               14:32:06 â”‚
â”‚ ERROR: Connection refused                          14:32:07 â”‚
â”‚ > è¿›ç¨‹é€€å‡ºï¼Œcode=1ï¼Œè€—æ—¶ 1523ms                    14:32:07 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.1 é¢æ¿äº¤äº’

| æ“ä½œ | è¡Œä¸º |
|------|------|
| ç‚¹å‡»æ ‡é¢˜æ  | å±•å¼€/æŠ˜å é¢æ¿ |
| æ‹–æ‹½é¡¶éƒ¨è¾¹ç¼˜ | è°ƒæ•´é«˜åº¦ï¼ˆ100-400pxï¼‰ |
| è¿è¡Œæ–‡ä»¶æ—¶ | è‡ªåŠ¨å±•å¼€é¢æ¿ |
| åŒå‡»æ ‡é¢˜æ  | æœ€å¤§åŒ–/æ¢å¤é«˜åº¦ |

### 5.2 é¢æ¿çŠ¶æ€

- æŠ˜å ï¼š`â–¶ è¿è¡Œæ—¥å¿— [æ— è¾“å‡º]`
- è¿è¡Œä¸­ï¼š`â–¼ è¿è¡Œæ—¥å¿— (è¿è¡Œä¸­...) [â¹ åœæ­¢]`

### 5.3 æ—¥å¿—æ ·å¼

- å‘½ä»¤è¡Œï¼š`#808080` ç°è‰²ï¼Œå‰ç¼€ `>`
- stdoutï¼š`#d4d4d4` æµ…ç°ç™½
- stderrï¼š`#f48771` çº¢è‰²
- æ—¶é—´æˆ³ï¼šå³å¯¹é½ï¼Œ`#606060`
- å­—ä½“ï¼šç­‰å®½å­—ä½“ Consolas/Monaco

---

## 6. ç»„ä»¶ç»“æ„

```
WorkerCodeEditor.vue (ä¸»å®¹å™¨)
â”œâ”€â”€ FileTree.vue (ä¾§è¾¹æ ç›®å½•æ ‘)
â”‚   â””â”€â”€ FileTreeNode.vue (é€’å½’èŠ‚ç‚¹)
â”œâ”€â”€ EditorTabs.vue (æ ‡ç­¾æ )
â”œâ”€â”€ CodeEditor.vue (Monaco ç¼–è¾‘å™¨å°è£…)
â”œâ”€â”€ LogPanel.vue (æ—¥å¿—é¢æ¿)
â””â”€â”€ ContextMenu.vue (å³é”®èœå•)
```

---

## 7. çŠ¶æ€ç®¡ç† (Pinia Store)

```typescript
// stores/workerEditor.ts
interface WorkerEditorState {
  // ç›®å½•æ ‘
  fileTree: TreeNode | null
  expandedDirs: Set<string>

  // æ ‡ç­¾é¡µ
  openTabs: Tab[]
  activeTabId: string | null

  // ç¼–è¾‘å™¨
  modifiedFiles: Set<string>

  // æ—¥å¿—
  logExpanded: boolean
  logRunning: boolean
  logs: LogEntry[]

  // å¸ƒå±€
  sidebarWidth: number
  logPanelHeight: number
}

interface Tab {
  id: string
  path: string
  name: string
  content: string
  isModified: boolean
  isPinned: boolean
}

interface LogEntry {
  type: 'command' | 'stdout' | 'stderr' | 'info'
  data: string
  timestamp: Date
}
```

---

## 8. æ–‡ä»¶å˜æ›´æ¸…å•

### 8.1 æ–°å»ºæ–‡ä»¶

- `web/src/views/worker/WorkerCodeEditor.vue` - ä¸»å®¹å™¨
- `web/src/views/worker/components/FileTree.vue` - ç›®å½•æ ‘
- `web/src/views/worker/components/FileTreeNode.vue` - æ ‘èŠ‚ç‚¹
- `web/src/views/worker/components/EditorTabs.vue` - æ ‡ç­¾æ 
- `web/src/views/worker/components/CodeEditor.vue` - ç¼–è¾‘å™¨
- `web/src/views/worker/components/LogPanel.vue` - æ—¥å¿—é¢æ¿
- `web/src/views/worker/components/ContextMenu.vue` - å³é”®èœå•
- `web/src/stores/workerEditor.ts` - çŠ¶æ€ç®¡ç†

### 8.2 åˆ é™¤æ–‡ä»¶

- `web/src/views/worker/WorkerCodeManager.vue`
- `web/src/views/worker/components/FileTable.vue`
- `web/src/views/worker/components/FileToolbar.vue`
- `web/src/views/worker/components/FileEditor.vue`
- `web/src/views/worker/components/MoveDialog.vue`

### 8.3 ä¿ç•™æ–‡ä»¶

- `web/src/views/worker/components/CreateDialog.vue` - å¤ç”¨
- `web/src/views/worker/components/RenameDialog.vue` - å¤ç”¨

### 8.4 ä¿®æ”¹æ–‡ä»¶

- `web/src/router/index.ts` - æ›´æ–°ç»„ä»¶å¼•ç”¨
- `web/src/api/worker.ts` - å¯èƒ½éœ€è¦æ·»åŠ æ–°æ¥å£

---

## 9. API éœ€æ±‚

ç°æœ‰ API å·²æ»¡è¶³éœ€æ±‚ï¼š
- `GET /api/worker/files?tree=true` - è·å–ç›®å½•æ ‘
- `GET /api/worker/files/{path}` - è·å–æ–‡ä»¶å†…å®¹
- `PUT /api/worker/files/{path}` - ä¿å­˜æ–‡ä»¶
- `POST /api/worker/files/{path}` - åˆ›å»ºæ–‡ä»¶/ç›®å½•
- `DELETE /api/worker/files/{path}` - åˆ é™¤
- `PATCH /api/worker/files/{path}` - ç§»åŠ¨/é‡å‘½å
- `WS /ws/worker/run` - è¿è¡Œæ–‡ä»¶
