# SEO HTML Generator 模板标签详解

## 项目概述

这是一个 SEO 站群 HTML 动态生成系统，支持千万级关键词/图片/文章管理，具备智能蜘蛛识别功能。

---

## 一、所有模板标签详解

### 1. 随机关键词标签

| 标签 | 用途 | 示例输出 |
|------|------|---------|
| `{{ random_keyword() }}` | 获取随机关键词（HTML实体编码） | "游戏下载器" |

**向后兼容别名**（仍可使用）：
- `{{ random_hotspot() }}` → 等同于 `random_keyword()`
- `{{ keyword_with_emoji() }}` → 等同于 `random_keyword()`

**实现位置**: `core/seo_core.py`

### 2. 随机 URL 标签

| 标签 | 用途 | 生成格式 |
|------|------|---------|
| `{{ random_url() }}` | 生成随机内链 URL | 格式1 (60%): `/?123456789.html` |
|  |  | 格式2 (40%): `/?20260110/12345.html` |

**实现位置**: `core/link_generator.py`

### 3. 随机数字标签

| 标签 | 用途 | 示例 |
|------|------|------|
| `{{ random_number(min, max) }}` | 生成指定范围内的随机整数 | `{{ random_number(1, 100) }}` → 45 |

### 4. 随机图片标签

| 标签 | 用途 | 说明 |
|------|------|------|
| `{{ random_image() }}` | 获取随机图片 URL | 优先从全局缓存池获取 |

**实现位置**: `core/seo_core.py` 的 `_random_image_sync()` 方法

### 5. CSS 类名生成标签

| 标签 | 用途 | 生成格式 |
|------|------|---------|
| `{{ cls('semantic_name') }}` | 生成随机 CSS 类名 | `"a1b2c3d4e5f6g h7i8j9k0l1m2n3o4p5q6r7s8t9u0v1w2 header"` |

**实现位置**: `core/class_generator.py`

**格式详解**:
- 部分1: 13位随机字母数字
- 部分2: 32位随机字母数字
- 部分3: 传入的语义名称（如 `header`, `footer` 等）

### 6. 时间相关标签

| 标签 | 用途 | 示例输出 |
|------|------|---------|
| `{{ now() }}` | 获取当前日期时间 | "2026-01-25 14:33:45" |

### 7. 正文内容标签

| 标签 | 用途 | 说明 |
|------|------|------|
| `{{ content() }}` | 获取正文内容 | 优先使用预加载内容 |

**向后兼容别名**（仍可使用）：
- `{{ content_with_pinyin() }}` → 等同于 `content()`

### 8. 页面上下文变量

| 标签 | 用途 |
|------|------|
| `{{ title }}` | 页面标题（从 context 传入） |
| `{{ site_id }}` | 站点ID |
| `{{ analytics_code or '' }}` | 统计代码（可选） |

### 9. Jinja2 控制流标签

| 标签 | 用途 | 示例 |
|------|------|------|
| `{% for i in range(n) %}...{% endfor %}` | 循环生成重复元素 | 生成50个列表项 |
| `{% if condition %}...{% endif %}` | 条件判断 | 根据条件显示/隐藏 |

### 10. 内置工具函数

| 函数 | 用途 |
|------|------|
| `encode()` | HTML实体编码 |
| `range()` | Python 内置范围生成 |
| `len()` | Python 内置长度函数 |

---

## 二、项目主要功能

### 核心功能

1. **动态HTML生成** - 基于 Jinja2 模板引擎，每次请求生成不同内容
2. **蜘蛛智能识别** - 支持6种搜索引擎（百度/Google/Bing/搜狗/360/头条）
3. **三层缓存架构** - 文件缓存 + 内存缓存池 + 数据库
4. **千万级数据支持** - 关键词、图片URL、文章内容

### 爬虫系统

1. **在线代码编辑** - Monaco Editor 支持
2. **定时任务调度** - Cron 表达式
3. **自动内容处理** - 原始文章自动拆分为标题库和段落库

### 管理后台

1. **Vue 3 现代化界面** - Element Plus 组件库
2. **完整 CRUD 操作** - 站点/关键词/图片/文章/爬虫项目管理
3. **实时日志查看** - WebSocket 推送
4. **数据统计仪表板** - ECharts 可视化

---

## 三、关键文件位置

| 文件 | 说明 |
|------|------|
| `core/seo_core.py` | SEO渲染核心，模板函数注册 |
| `core/class_generator.py` | CSS类名生成器 |
| `core/link_generator.py` | URL链接生成器 |
| `core/encoder.py` | HTML实体编码 |
| `core/emoji.py` | Emoji管理 |
| `templates/download_site/template.html` | 示例模板文件 |

---

